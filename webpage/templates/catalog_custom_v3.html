{% extends 'base.html' %}

{% block content %}

<div class="col-md-6 offset-md-3">
<h1>კატალოგის მოდელები და ქვები</h1>
<br/>

<form method="POST" action="{% url 'catalog_custom' %}">
	{% csrf_token %}

    <div class="mb-3 d-flex gap-2">
    {{ cataloglistform.as_div }}
    <button type="submit" class="btn btn-secondary">გაფილტვრა</button>
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#addModal">
        დამატება
    </button>
    <button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#changeModal">
        შეცვლა
    </button>
    </div>
    <br/>

    <div class="mb-3">
        <div class="mb-3 d-flex gap-2">
            <input type="text" class="form-control" name="na" value={{ model.model_id }} readonly>
            <input type="text" class="form-control" name="na" value={{ model.model_name }} readonly>
            <input type="date" class="form-control" name="na" value={{ model.creation_date|date:"Y-m-d" }} readonly>
        </div>
        <br/>
        <div class="mb-3 d-flex gap-2">
            <input type="text" class="form-control" name="na" value={{ model.model_category }} readonly>
            <input type="text" class="form-control" name="na" value={{ model.gender }} readonly>
            <input type="number" class="form-control" name="na" value={{ model.peaces }} min=1, style="width: 100px" readonly>
        </div>
        <br/>
        <div class="mb-3 d-flex gap-2">
            <textarea class="form-control" name="na" readonly>{{ model.note }}</textarea>
            <img src="/media/{{ model.image_location }}" alt="model">
        </div>
        <br/>
    </div>
 <!-- Add Modal -->
    <div class="modal fade" id="addModal" tabindex="-1" aria-labelledby="addModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addModalLabel">დამატების ფორმა</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
              <div class="mb-3">
                <input type="text" class="form-control" name="model_id" value={{ model.model_id }}>
                <input type="text" class="form-control" name="model_name" value={{ model.model_name }}>
                <input type="date" class="form-control" name="creation_date" value={{ model.creation_date|date:"Y-m-d" }}>
                {{ modelcategorylistform.model_category }}
                {{ genderlistform.gender }}
                <input type="number" class="form-control" name="peaces" value={{ model.peaces }} min=1, style="width: 100px">
                <input type="file" class="form-control" name="image_location" value={{ model.image_location }}>
                <textarea class="form-control" name="note">{{ model.note }}</textarea>
              </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-secondary">დასტური</button>
          </div>
        </div>
      </div>
    </div>
 <!-- Change Modal -->
    <div class="modal fade" id="changeModal" tabindex="-1" aria-labelledby="changeModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="changeModalLabel">{{ model.model_id }} მოდელზე მონაცემების შეცვლის ფორმა</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
              <div class="mb-3 d-flex gap-2">
                  <div class="mb-3">
                    <p>არსებული ინფორმაცია</p>
                    <input type="text" class="form-control" name="na" value={{ model.model_name }} readonly>
                    <input type="date" class="form-control" name="na" value={{ model.creation_date|date:"Y-m-d" }} readonly>
                    <input type="text" class="form-control" name="na" value={{ model.model_category }} readonly>
                    <input type="text" class="form-control" name="na" value={{ model.gender }} readonly>
                    <input type="number" class="form-control" name="na" value={{ model.peaces }} min=1, style="width: 100px" readonly>
                    <textarea class="form-control" name="na" readonly>{{ model.note }}</textarea>
                    <input type="text" class="form-control" name="na" value={{ model.image_location }} readonly>
                  </div>
                  <div class="mb-3">
                    <p>ახალი ინფორმაცია</p>
                    <input type="text" class="form-control" placeholder="დასახელება" name="model_name" value={{ model.model_name }}>
                    <input type="date" class="form-control" placeholder="შექმნის თარიღი" name="creation_date" value={{ model.creation_date|date:"Y-m-d" }}>
                    {{ modelcategorylistform.model_category }}
                    {{ genderlistform.gender }}
                    <input type="number" class="form-control" placeholder="კომპონენტები" name="peaces" value={{ model.peaces }} min=1, style="width: 100px">
                    <textarea class="form-control" placeholder="კომენტარი" name="note">{{ model.note }}</textarea>
                    <input type="file" class="form-control" placeholder="ფაილის სახელი" name="image_location" value={{ model.image_location }}>
                  </div>
              </div>
              <center><img src="/media/{{ model.image_location }}" alt="model"></center>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-secondary">დასტური</button>
          </div>
        </div>
      </div>
    </div>
</form>

<table class="table table-striped table-hover table-bordered">
  <thead class="table-dark">
    <tr>
      <th scope="col">მოდელი</th>
      <th scope="col">ქვის სრული-სახელი</th>
      <th scope="col">რაოდენობა</th>
      <th scope="col">კომენტარი</th>
    </tr>
  </thead>

  <tbody>
    {% for stone in stones %}
    <tr>
        <td>{{ stone.model_id }}</td>
        <td>{{ stone.stone_full_name }}</td>
        <td>{{ stone.quantity }} {{ stone.quantity_unit }}</td>
        <td>{{ stone.note }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}